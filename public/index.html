<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AdsPro AI - Google Ads Intelligence</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{font-family:'Inter',sans-serif}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#0f172a}::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}
.nav-item.active{background:linear-gradient(135deg,#3b82f6,#8b5cf6);box-shadow:0 4px 20px rgba(59,130,246,0.4)}
.stat-card:hover{transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,0.3)}
.table-row:hover{background:rgba(59,130,246,0.1)}
.tab-btn.active{background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:white}
.typing-cursor{animation:blink 0.8s infinite}
@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}
@keyframes spin{to{transform:rotate(360deg)}}
.ai-message p{margin-bottom:0.75rem}.ai-message strong{color:#60a5fa}
.ai-message code{background:#1e293b;padding:2px 6px;border-radius:4px}
input:focus,select:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.2)}
</style>
</head>
<body class="bg-[#0a0f1a] text-white min-h-screen">
<div id="app">
<div class="flex">
<aside class="w-72 h-screen bg-[#0f172a] border-r border-slate-800 fixed left-0 top-0 z-50 flex flex-col">
<div class="p-6 border-b border-slate-800">
<div class="flex items-center gap-4">
<div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
</div>
<div><h1 class="font-bold text-xl bg-gradient-to-r from-blue-400 to-pink-400 bg-clip-text text-transparent">AdsPro AI</h1><p class="text-xs text-slate-500">Intelligence Platform</p></div>
</div>
</div>
<div class="p-4 border-b border-slate-800">
<label class="text-xs text-slate-500 uppercase block mb-2">Ad Account</label>
<select id="accountSelector" class="w-full px-4 py-3 rounded-xl text-sm bg-slate-800/50 border border-slate-700"><option>284-126-9298</option><option>464-103-2686</option></select>
</div>
<nav class="flex-1 p-4 space-y-2 overflow-y-auto">
<p class="text-xs text-slate-500 uppercase px-4 mb-2">Main</p>
<button onclick="showPage('dashboard')" class="nav-item active w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all" data-page="dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>Dashboard</button>
<button onclick="showPage('campaigns')" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-400 hover:bg-slate-800/50 transition-all" data-page="campaigns"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>Campaigns</button>
<p class="text-xs text-slate-500 uppercase px-4 mt-6 mb-2">Intelligence</p>
<button onclick="showPage('competitor-research')" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-400 hover:bg-slate-800/50 transition-all" data-page="competitor-research"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>Competitor Spy<span class="ml-auto px-2 py-0.5 rounded-full text-[10px] bg-orange-500/20 text-orange-400">PRO</span></button>
<button onclick="showPage('keyword-research')" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-400 hover:bg-slate-800/50 transition-all" data-page="keyword-research"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>Keyword Research</button>
<button onclick="showPage('ai-assistant')" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-400 hover:bg-slate-800/50 transition-all" data-page="ai-assistant"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>AI Assistant<span class="ml-auto w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span></button>
<p class="text-xs text-slate-500 uppercase px-4 mt-6 mb-2">Settings</p>
<button onclick="showPage('settings')" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-400 hover:bg-slate-800/50 transition-all" data-page="settings"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>Settings</button>
</nav>
<div class="p-4 border-t border-slate-800">
<div id="userInfo" class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center text-sm font-bold">?</div><div class="flex-1"><p class="text-sm font-medium">Not logged in</p><p class="text-xs text-slate-500">Sign in to continue</p></div></div>
</div>
</aside>
<main class="ml-72 flex-1 min-h-screen"><div class="p-8"><div id="alertContainer"></div>
<!-- Login Page -->
<div id="page-login" class="page-content">
<div class="max-w-md mx-auto mt-20">
<div class="text-center mb-8"><div class="w-20 h-20 rounded-3xl bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6 shadow-2xl"><svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><h2 class="text-3xl font-bold mb-2">Welcome to AdsPro AI</h2><p class="text-slate-400">Connect your Google Ads account</p></div>
<div class="bg-slate-800/50 border border-slate-700 rounded-2xl p-8"><button onclick="loginWithGoogle()" class="w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl bg-white text-gray-800 font-semibold hover:bg-gray-100"><svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Continue with Google</button></div>
</div>
</div>

<!-- Dashboard Page -->
<div id="page-dashboard" class="page-content hidden">
<div class="flex items-center justify-between mb-8"><div><h2 class="text-2xl font-bold">Dashboard</h2><p class="text-slate-400 mt-1">Your Google Ads performance</p></div>
<button onclick="refreshData()" class="p-2 rounded-xl bg-slate-800 border border-slate-700 hover:border-blue-500"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg></button>
</div>
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
<div class="stat-card bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 transition-all"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center"><svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg></div><span class="text-xs text-emerald-400">+12%</span></div><p class="text-3xl font-bold" id="totalImpressions">0</p><p class="text-sm text-slate-400">Impressions</p></div>
<div class="stat-card bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 transition-all"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center"><svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5"/></svg></div><span class="text-xs text-emerald-400">+8%</span></div><p class="text-3xl font-bold" id="totalClicks">0</p><p class="text-sm text-slate-400">Clicks</p></div>
<div class="stat-card bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 transition-all"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center"><svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><span class="text-xs text-emerald-400">+15%</span></div><p class="text-3xl font-bold" id="totalConversions">0</p><p class="text-sm text-slate-400">Conversions</p></div>
<div class="stat-card bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 transition-all"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 rounded-xl bg-rose-500/20 flex items-center justify-center"><svg class="w-6 h-6 text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div><span class="text-xs text-rose-400">-3%</span></div><p class="text-3xl font-bold" id="totalCost">$0</p><p class="text-sm text-slate-400">Total Spend</p></div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
<div class="lg:col-span-2 bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6"><h3 class="font-semibold mb-4">Performance Trend</h3><canvas id="performanceChart" height="120"></canvas></div>
<div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6"><h3 class="font-semibold mb-4">Quick Actions</h3><div class="space-y-3">
<button onclick="showPage('competitor-research')" class="w-full p-4 rounded-xl bg-orange-500/10 border border-orange-500/30 text-left hover:border-orange-500 transition-all"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center"><svg class="w-5 h-5 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg></div><div><p class="font-medium text-sm">Spy on Competitors</p><p class="text-xs text-slate-400">See their ads & keywords</p></div></div></button>
<button onclick="showPage('keyword-research')" class="w-full p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30 text-left hover:border-emerald-500 transition-all"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center"><svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div><div><p class="font-medium text-sm">Find Keywords</p><p class="text-xs text-slate-400">Discover opportunities</p></div></div></button>
<button onclick="showPage('ai-assistant')" class="w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 text-left hover:border-purple-500 transition-all"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center"><svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg></div><div><p class="font-medium text-sm">AI Campaign Builder</p><p class="text-xs text-slate-400">Generate winning ads</p></div></div></button>
</div></div>
</div>
</div>
<!-- Competitor Research Page -->
<div id="page-competitor-research" class="page-content hidden">
<div class="flex items-center justify-between mb-8"><div><h2 class="text-2xl font-bold">Competitor Intelligence</h2><p class="text-slate-400 mt-1">Spy on competitors' Google Ads strategy</p></div>
<div id="semrushStatus" class="flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-800 border border-slate-700"><span class="w-2 h-2 rounded-full bg-slate-500"></span><span class="text-sm text-slate-400">Not connected</span></div>
</div>
<div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 mb-8">
<div class="flex items-center gap-4">
<div class="flex-1 relative"><svg class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg><input type="text" id="competitorDomainInput" placeholder="Enter competitor domain (e.g., spectrum.com)" class="w-full pl-12 pr-4 py-4 rounded-xl bg-slate-700/50 border border-slate-600 text-lg"></div>
<button onclick="analyzeCompetitor()" id="analyzeBtn" class="px-8 py-4 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 font-semibold hover:from-blue-600 hover:to-purple-700 flex items-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>Analyze</button>
</div>
<div class="flex items-center gap-6 mt-4"><label class="text-sm text-slate-400">Quick:</label><button onclick="setCompetitor('spectrum.com')" class="text-sm text-blue-400 hover:underline">spectrum.com</button><button onclick="setCompetitor('xfinity.com')" class="text-sm text-blue-400 hover:underline">xfinity.com</button><button onclick="setCompetitor('att.com')" class="text-sm text-blue-400 hover:underline">att.com</button></div>
</div>
<div id="competitorResults" class="hidden">
<div id="competitorOverview" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"></div>
<div class="flex items-center gap-2 mb-6 border-b border-slate-700 pb-4">
<button onclick="showCompetitorTab('ads')" class="tab-btn active px-6 py-3 rounded-xl text-sm font-medium bg-slate-800" data-tab="ads">üì¢ Ad Copies</button>
<button onclick="showCompetitorTab('keywords')" class="tab-btn px-6 py-3 rounded-xl text-sm font-medium bg-slate-800 text-slate-400" data-tab="keywords">üîë Paid Keywords</button>
<button onclick="showCompetitorTab('organic')" class="tab-btn px-6 py-3 rounded-xl text-sm font-medium bg-slate-800 text-slate-400" data-tab="organic">üå± Organic</button>
<button onclick="showCompetitorTab('competitors')" class="tab-btn px-6 py-3 rounded-xl text-sm font-medium bg-slate-800 text-slate-400" data-tab="competitors">üè¢ Competitors</button>
</div>
<div id="tab-ads" class="tab-content"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold">Competitor Ad Copies</h3><button onclick="generateBetterAds()" class="px-4 py-2 rounded-xl bg-gradient-to-r from-purple-500 to-pink-600 text-sm font-medium flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>AI: Generate Better Ads</button></div><div id="competitorAdsContainer" class="space-y-4"></div></div>
<div id="tab-keywords" class="tab-content hidden"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold">Paid Keywords</h3><button onclick="exportKeywords()" class="px-4 py-2 rounded-lg bg-slate-800 border border-slate-700 text-sm">Export CSV</button></div><div id="competitorKeywordsContainer" class="bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden max-h-[600px] overflow-y-auto"></div></div>
<div id="tab-organic" class="tab-content hidden"><h3 class="text-lg font-semibold mb-4">Organic Keywords</h3><div id="organicKeywordsContainer" class="bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden max-h-[600px] overflow-y-auto"></div></div>
<div id="tab-competitors" class="tab-content hidden"><h3 class="text-lg font-semibold mb-4">Ad Competitors</h3><div id="adCompetitorsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>
</div>
<div id="competitorEmptyState" class="text-center py-20"><div class="w-24 h-24 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div><h3 class="text-xl font-semibold mb-2">Enter a competitor domain</h3><p class="text-slate-400">Discover their ad strategies, keywords, and spending</p></div>
</div>

<!-- Keyword Research Page -->
<div id="page-keyword-research" class="page-content hidden">
<div class="flex items-center justify-between mb-8"><div><h2 class="text-2xl font-bold">Keyword Research</h2><p class="text-slate-400 mt-1">Find profitable keywords with competitor data</p></div></div>
<div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 mb-8">
<div class="flex items-center gap-4">
<div class="flex-1 relative"><svg class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg><input type="text" id="keywordSearchInput" placeholder="Enter keyword (e.g., internet service)" class="w-full pl-12 pr-4 py-4 rounded-xl bg-slate-700/50 border border-slate-600 text-lg"></div>
<button onclick="researchKeyword()" id="keywordSearchBtn" class="px-8 py-4 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 font-semibold flex items-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>Research</button>
</div>
<div class="grid grid-cols-4 gap-4 mt-4">
<div><label class="text-xs text-slate-400 block mb-1">Max CPC</label><select id="maxCpcFilter" class="w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-sm"><option value="100">Any</option><option value="5">Under $5</option><option value="10" selected>Under $10</option><option value="20">Under $20</option></select></div>
<div><label class="text-xs text-slate-400 block mb-1">Min Volume</label><select id="minVolumeFilter" class="w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-sm"><option value="0">Any</option><option value="100" selected>100+</option><option value="500">500+</option><option value="1000">1K+</option></select></div>
<div><label class="text-xs text-slate-400 block mb-1">Competition</label><select id="competitionFilter" class="w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-sm"><option value="all">All</option><option value="low">Low Only</option></select></div>
<div><label class="text-xs text-slate-400 block mb-1">Intent</label><select id="intentFilter" class="w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-sm"><option value="all">All</option><option value="commercial">Commercial</option></select></div>
</div>
</div>
<div id="keywordResults" class="hidden">
<div id="keywordSummary" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"></div>
<div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden">
<div class="p-4 border-b border-slate-700 flex items-center justify-between"><div class="flex items-center gap-4"><h3 class="font-semibold">Keywords</h3><span id="keywordCount" class="px-3 py-1 rounded-full text-xs bg-blue-500/20 text-blue-400">0</span></div>
<div class="flex gap-2"><button onclick="filterKeywords('opportunities')" class="px-3 py-1.5 rounded-lg text-xs bg-emerald-500/20 text-emerald-400">üíé Best</button><button onclick="filterKeywords('lowcpc')" class="px-3 py-1.5 rounded-lg text-xs bg-blue-500/20 text-blue-400">üí∞ Low CPC</button><button onclick="filterKeywords('highvolume')" class="px-3 py-1.5 rounded-lg text-xs bg-purple-500/20 text-purple-400">üìà High Vol</button></div>
</div>
<div id="keywordTableContainer" class="overflow-x-auto max-h-[600px] overflow-y-auto"></div>
</div>
</div>
<div id="keywordEmptyState" class="text-center py-20"><div class="w-24 h-24 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div><h3 class="text-xl font-semibold mb-2">Search for keywords</h3><p class="text-slate-400">Enter a keyword to find opportunities</p></div>
</div>
<!-- AI Assistant Page -->
<div id="page-ai-assistant" class="page-content hidden">
<div class="flex gap-6 h-[calc(100vh-8rem)]">
<div class="flex-1 flex flex-col bg-slate-800/30 border border-slate-700/50 rounded-2xl overflow-hidden">
<div class="p-4 border-b border-slate-700/50 flex items-center justify-between">
<div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><div><h3 class="font-semibold">AI Assistant</h3><span id="aiStatus" class="px-2 py-0.5 rounded-full text-xs bg-emerald-500/20 text-emerald-400">Ready</span></div></div>
<button onclick="clearChat()" class="p-2 rounded-lg hover:bg-slate-700 text-slate-400"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg></button>
</div>
<div id="chatMessages" class="flex-1 overflow-y-auto p-6 space-y-4"><div class="flex gap-3"><div class="w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><div class="bg-slate-700/50 rounded-xl rounded-tl-none p-4 max-w-2xl"><p class="text-sm">Hello! I can help you create campaigns, generate ad copy, find keywords, and optimize. What would you like to do?</p></div></div></div>
<div class="p-4 border-t border-slate-700/50"><div class="flex gap-3"><input type="text" id="chatInput" placeholder="Ask about Google Ads..." class="flex-1 px-4 py-3 rounded-xl bg-slate-700/50 border border-slate-600" onkeypress="if(event.key==='Enter')sendChat()"><button onclick="sendChat()" id="sendBtn" class="px-6 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-600 font-medium">Send</button></div></div>
</div>
<div class="w-72 space-y-4">
<div class="bg-slate-800/50 border border-slate-700/50 rounded-xl p-4"><h4 class="font-semibold text-sm mb-3">Quick Actions</h4><div class="space-y-2">
<button onclick="quickPrompt('Create a search campaign for internet services with $50/day budget')" class="w-full p-3 rounded-lg bg-blue-500/20 text-left text-sm hover:bg-blue-500/30"><span class="text-blue-400 font-medium">üìä Create Campaign</span></button>
<button onclick="quickPrompt('Generate 15 headlines and 4 descriptions for fiber internet ads')" class="w-full p-3 rounded-lg bg-emerald-500/20 text-left text-sm hover:bg-emerald-500/30"><span class="text-emerald-400 font-medium">‚úçÔ∏è Write Ad Copy</span></button>
<button onclick="quickPrompt('What are best practices to improve Quality Score?')" class="w-full p-3 rounded-lg bg-purple-500/20 text-left text-sm hover:bg-purple-500/30"><span class="text-purple-400 font-medium">‚ö° Optimize Tips</span></button>
</div></div>
</div>
</div>
</div>

<!-- Campaigns Page -->
<div id="page-campaigns" class="page-content hidden"><h2 class="text-2xl font-bold mb-6">Campaigns</h2><div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center text-slate-400">Connect Google Ads to view campaigns</div></div>

<!-- Settings Page -->
<div id="page-settings" class="page-content hidden">
<h2 class="text-2xl font-bold mb-6">Settings</h2>
<div class="max-w-2xl space-y-6">
<div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
<div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div><div><h3 class="font-semibold">SEMrush API</h3><p class="text-xs text-slate-400">For competitor & keyword research</p></div><span class="ml-auto px-2 py-1 rounded text-xs bg-orange-500/20 text-orange-400">Required</span></div>
<div><label class="text-sm text-slate-400 block mb-2">API Key</label><div class="flex gap-2"><input type="password" id="semrushApiKey" placeholder="Enter SEMrush API key" class="flex-1 px-4 py-3 rounded-xl bg-slate-700 border border-slate-600"><button onclick="saveSemrushKey()" class="px-6 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-600 font-medium">Save</button></div><p class="text-xs text-slate-500 mt-2">Find at: SEMrush ‚Üí Settings ‚Üí Subscription Info</p></div>
</div>
<div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
<div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><div><h3 class="font-semibold">Claude AI API</h3><p class="text-xs text-slate-400">For AI assistant</p></div><span class="ml-auto px-2 py-1 rounded text-xs bg-purple-500/20 text-purple-400">Required</span></div>
<div><label class="text-sm text-slate-400 block mb-2">API Key</label><div class="flex gap-2"><input type="password" id="claudeApiKey" placeholder="sk-ant-api03-..." class="flex-1 px-4 py-3 rounded-xl bg-slate-700 border border-slate-600"><button onclick="saveClaudeKey()" class="px-6 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-600 font-medium">Save</button></div></div>
</div>
</div>
</div>

</div></main></div></div>
<script>
let currentPage='login',competitorData={keywords:[],ads:[],organic:[],competitors:[]},keywordData=[],isTyping=false;

function checkAuth(){fetch('/auth/status').then(r=>r.json()).then(d=>{if(d.authenticated){document.getElementById('userInfo').innerHTML='<div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center text-sm font-bold">'+(d.user.name?.charAt(0)||'U')+'</div><div class="flex-1"><p class="text-sm font-medium">'+(d.user.name||'User')+'</p><p class="text-xs text-slate-500">'+(d.user.email||'')+'</p></div>';showPage('dashboard');loadDashboard();}else showPage('login');}).catch(()=>showPage('login'));}
function loginWithGoogle(){window.location.href='/auth/google';}
function showPage(p){currentPage=p;document.querySelectorAll('.page-content').forEach(e=>e.classList.add('hidden'));document.getElementById('page-'+p)?.classList.remove('hidden');document.querySelectorAll('.nav-item').forEach(n=>{n.classList.remove('active');n.classList.add('text-slate-400');});document.querySelector('.nav-item[data-page="'+p+'"]')?.classList.add('active');document.querySelector('.nav-item[data-page="'+p+'"]')?.classList.remove('text-slate-400');updateSemrushStatus();if(p==='dashboard')loadDashboard();}
function getApiKey(n){return localStorage.getItem('adspro_'+n+'_key');}
function setApiKey(n,k){localStorage.setItem('adspro_'+n+'_key',k);}
function saveSemrushKey(){var k=document.getElementById('semrushApiKey').value.trim();if(k){setApiKey('semrush',k);showAlert('SEMrush API saved!','success');updateSemrushStatus();}else showAlert('Enter API key','error');}
function saveClaudeKey(){var k=document.getElementById('claudeApiKey').value.trim();if(k){setApiKey('claude',k);showAlert('Claude API saved!','success');}else showAlert('Enter API key','error');}
function updateSemrushStatus(){var s=getApiKey('semrush'),el=document.getElementById('semrushStatus');if(el){el.innerHTML=s?'<span class="w-2 h-2 rounded-full bg-emerald-500"></span><span class="text-sm text-emerald-400">SEMrush Connected</span>':'<span class="w-2 h-2 rounded-full bg-slate-500"></span><span class="text-sm text-slate-400">Not connected</span>';el.className=s?'flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-500/30':'flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-800 border border-slate-700';}}
function setCompetitor(d){document.getElementById('competitorDomainInput').value=d;}

async function analyzeCompetitor(){var d=document.getElementById('competitorDomainInput').value.trim();if(!d)return showAlert('Enter domain','error');var sk=getApiKey('semrush');if(!sk){showAlert('Add SEMrush API in Settings','error');showPage('settings');return;}var btn=document.getElementById('analyzeBtn');btn.disabled=true;btn.innerHTML='<svg class="w-5 h-5 animate-spin" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.3"/><path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"/></svg> Analyzing...';
try{var [kr,ar,or,cr]=await Promise.all([fetch('/automation/competitor/keywords',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({domain:d,researchApiKey:sk,researchProvider:'semrush'})}),fetch('/automation/competitor/ads',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({domain:d,researchApiKey:sk,researchProvider:'semrush'})}),fetch('/automation/competitor/organic',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({domain:d,researchApiKey:sk,researchProvider:'semrush'})}),fetch('/automation/competitor/adcompetitors',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({domain:d,researchApiKey:sk,researchProvider:'semrush'})})]);var [kw,ad,og,cp]=await Promise.all([kr.json(),ar.json(),or.json(),cr.json()]);competitorData={domain:d,keywords:kw.keywords||[],ads:ad.ads||[],organic:og.keywords||[],competitors:cp.competitors||[]};renderCompetitorResults();document.getElementById('competitorResults').classList.remove('hidden');document.getElementById('competitorEmptyState').classList.add('hidden');}catch(e){showAlert('Error: '+e.message,'error');}btn.disabled=false;btn.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg> Analyze';}

function renderCompetitorResults(){var ts=competitorData.keywords.reduce((a,k)=>a+(k.trafficCost||0),0),ac=competitorData.keywords.length?(competitorData.keywords.reduce((a,k)=>a+(k.cpc||0),0)/competitorData.keywords.length):0;document.getElementById('competitorOverview').innerHTML='<div class="bg-blue-500/10 border border-blue-500/30 rounded-xl p-5"><p class="text-3xl font-bold text-blue-400">'+competitorData.keywords.length+'</p><p class="text-sm text-slate-400">Paid Keywords</p></div><div class="bg-purple-500/10 border border-purple-500/30 rounded-xl p-5"><p class="text-3xl font-bold text-purple-400">'+competitorData.ads.length+'</p><p class="text-sm text-slate-400">Active Ads</p></div><div class="bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-5"><p class="text-3xl font-bold text-emerald-400">$'+fmt(ts)+'</p><p class="text-sm text-slate-400">Est. Monthly Spend</p></div><div class="bg-orange-500/10 border border-orange-500/30 rounded-xl p-5"><p class="text-3xl font-bold text-orange-400">$'+ac.toFixed(2)+'</p><p class="text-sm text-slate-400">Avg CPC</p></div>';renderCompetitorAds();renderCompetitorKeywords();renderOrganicKeywords();renderAdCompetitors();showCompetitorTab('ads');}

function renderCompetitorAds(){var c=document.getElementById('competitorAdsContainer');if(!competitorData.ads.length){c.innerHTML='<p class="text-slate-400 text-center py-8">No ads found</p>';return;}c.innerHTML=competitorData.ads.slice(0,20).map((a,i)=>'<div class="bg-slate-800/50 border-l-4 border-blue-500 rounded-xl p-5 hover:border-purple-500 transition-all"><div class="flex items-start justify-between mb-3"><span class="text-xs text-slate-500">Ad #'+(i+1)+'</span><span class="px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400">'+esc(a.keyword||'')+'</span></div><h4 class="text-blue-400 font-semibold text-lg mb-2">'+esc(a.title||'')+'</h4><p class="text-slate-300 text-sm mb-3">'+esc(a.description||'')+'</p><div class="flex items-center justify-between"><span class="text-xs text-emerald-400">'+(a.visibleUrl||'')+'</span><button onclick="improveAd('+i+')" class="text-xs text-purple-400 hover:underline">‚ú® Generate Better</button></div></div>').join('');}

function renderCompetitorKeywords(){var c=document.getElementById('competitorKeywordsContainer');if(!competitorData.keywords.length){c.innerHTML='<p class="text-slate-400 text-center py-8">No keywords found</p>';return;}c.innerHTML='<table class="w-full text-sm"><thead class="sticky top-0 bg-slate-800"><tr class="text-xs uppercase text-slate-400"><th class="text-left p-4">Keyword</th><th class="text-center p-4">Pos</th><th class="text-right p-4">Volume</th><th class="text-right p-4">CPC</th><th class="text-right p-4">Traffic</th><th class="text-right p-4">Cost/Mo</th><th class="text-center p-4">Comp</th></tr></thead><tbody>'+competitorData.keywords.slice(0,100).map(k=>'<tr class="table-row border-b border-slate-700/50"><td class="p-4"><div class="font-medium">'+esc(k.keyword)+'</div></td><td class="text-center p-4"><span class="px-2 py-1 rounded text-xs '+(k.position<=3?'bg-emerald-500/20 text-emerald-400':k.position<=10?'bg-blue-500/20 text-blue-400':'bg-slate-500/20 text-slate-400')+'">#'+k.position+'</span></td><td class="text-right p-4">'+fmt(k.searchVolume)+'</td><td class="text-right p-4 font-medium '+(k.cpc<3?'text-emerald-400':k.cpc<10?'text-amber-400':'text-rose-400')+'">$'+(k.cpc?.toFixed(2)||'0')+'</td><td class="text-right p-4">'+fmt(k.traffic)+'</td><td class="text-right p-4 text-purple-400">$'+fmt(k.trafficCost)+'</td><td class="text-center p-4"><div class="w-16 h-2 rounded bg-slate-700 mx-auto"><div class="h-full rounded '+(k.competition<0.3?'bg-emerald-500':k.competition<0.6?'bg-amber-500':'bg-rose-500')+'" style="width:'+((k.competition||0)*100)+'%"></div></div></td></tr>').join('')+'</tbody></table>';}

function renderOrganicKeywords(){var c=document.getElementById('organicKeywordsContainer');if(!competitorData.organic.length){c.innerHTML='<p class="text-slate-400 text-center py-8">No organic keywords</p>';return;}c.innerHTML='<table class="w-full text-sm"><thead class="sticky top-0 bg-slate-800"><tr class="text-xs uppercase text-slate-400"><th class="text-left p-4">Keyword</th><th class="text-center p-4">Pos</th><th class="text-right p-4">Volume</th><th class="text-right p-4">CPC</th><th class="text-right p-4">Traffic</th></tr></thead><tbody>'+competitorData.organic.slice(0,50).map(k=>'<tr class="table-row border-b border-slate-700/50"><td class="p-4 font-medium">'+esc(k.keyword)+'</td><td class="text-center p-4"><span class="px-2 py-1 rounded text-xs bg-emerald-500/20 text-emerald-400">#'+k.position+'</span></td><td class="text-right p-4">'+fmt(k.searchVolume)+'</td><td class="text-right p-4">$'+(k.cpc?.toFixed(2)||'0')+'</td><td class="text-right p-4">'+fmt(k.traffic)+'</td></tr>').join('')+'</tbody></table>';}

function renderAdCompetitors(){var c=document.getElementById('adCompetitorsContainer');if(!competitorData.competitors.length){c.innerHTML='<p class="text-slate-400 text-center py-8 col-span-2">No competitors found</p>';return;}c.innerHTML=competitorData.competitors.slice(0,10).map(cp=>'<div class="bg-slate-800/50 border border-slate-700/50 rounded-xl p-5 hover:border-blue-500 transition-all"><div class="flex items-center justify-between mb-3"><span class="font-semibold">'+cp.domain+'</span><button onclick="setCompetitor(\''+cp.domain+'\');analyzeCompetitor()" class="text-xs text-blue-400 hover:underline">Analyze</button></div><div class="grid grid-cols-2 gap-3 text-sm"><div><p class="text-xs text-slate-500">Common KWs</p><p class="font-medium">'+fmt(cp.commonKeywords)+'</p></div><div><p class="text-xs text-slate-500">Ad KWs</p><p class="font-medium">'+fmt(cp.adsKeywords)+'</p></div><div><p class="text-xs text-slate-500">Traffic</p><p class="font-medium">'+fmt(cp.adsTraffic)+'</p></div><div><p class="text-xs text-slate-500">Spend</p><p class="font-medium text-purple-400">$'+fmt(cp.adsTrafficCost)+'</p></div></div></div>').join('');}

function showCompetitorTab(t){document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.querySelector('.tab-btn[data-tab="'+t+'"]')?.classList.add('active');document.querySelectorAll('.tab-content').forEach(c=>c.classList.add('hidden'));document.getElementById('tab-'+t)?.classList.remove('hidden');}
function generateBetterAds(){var ads=competitorData.ads.slice(0,5),kws=competitorData.keywords.slice(0,10).map(k=>k.keyword).join(', ');quickPrompt('Based on these competitor ads, create BETTER Google Ads:\\n\\nADS:\\n'+ads.map(a=>'Title: "'+a.title+'"\\nDesc: "'+a.description+'"').join('\\n\\n')+'\\n\\nKEYWORDS: '+kws+'\\n\\nCreate 3 ads with 15 headlines and 4 descriptions each.');}
function improveAd(i){var a=competitorData.ads[i];quickPrompt('Improve this ad:\\nTitle: "'+a.title+'"\\nDesc: "'+a.description+'"\\nKeyword: "'+a.keyword+'"\\n\\nCreate 5 better headlines and 2 better descriptions.');}
async function researchKeyword(){var k=document.getElementById('keywordSearchInput').value.trim();if(!k)return showAlert('Enter keyword','error');var sk=getApiKey('semrush');if(!sk){showAlert('Add SEMrush API in Settings','error');showPage('settings');return;}var btn=document.getElementById('keywordSearchBtn');btn.disabled=true;btn.innerHTML='<svg class="w-5 h-5 animate-spin" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.3"/><path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"/></svg> Researching...';var mc=document.getElementById('maxCpcFilter').value;
try{var r=await fetch('/automation/keywords/discover',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({seedKeywords:[k],maxCpc:parseFloat(mc),researchApiKey:sk,researchProvider:'semrush'})});var d=await r.json();keywordData=d.keywords||[];renderKeywordResults();document.getElementById('keywordResults').classList.remove('hidden');document.getElementById('keywordEmptyState').classList.add('hidden');}catch(e){showAlert('Error: '+e.message,'error');}btn.disabled=false;btn.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg> Research';}

function renderKeywordResults(){var ac=keywordData.length?(keywordData.reduce((a,k)=>a+(k.cpc||0),0)/keywordData.length):0,lc=keywordData.filter(k=>k.difficulty==='Easy').length,op=keywordData.filter(k=>k.opportunityScore>=60).length;document.getElementById('keywordSummary').innerHTML='<div class="bg-blue-500/10 border border-blue-500/30 rounded-xl p-4"><p class="text-2xl font-bold text-blue-400">'+keywordData.length+'</p><p class="text-sm text-slate-400">Keywords</p></div><div class="bg-purple-500/10 border border-purple-500/30 rounded-xl p-4"><p class="text-2xl font-bold text-purple-400">$'+ac.toFixed(2)+'</p><p class="text-sm text-slate-400">Avg CPC</p></div><div class="bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4"><p class="text-2xl font-bold text-emerald-400">'+lc+'</p><p class="text-sm text-slate-400">Low Competition</p></div><div class="bg-orange-500/10 border border-orange-500/30 rounded-xl p-4"><p class="text-2xl font-bold text-orange-400">'+op+'</p><p class="text-sm text-slate-400">Opportunities</p></div>';document.getElementById('keywordCount').textContent=keywordData.length+' keywords';renderKeywordTable(keywordData);}

function renderKeywordTable(d){document.getElementById('keywordTableContainer').innerHTML='<table class="w-full text-sm"><thead class="sticky top-0 bg-slate-800"><tr class="text-xs uppercase text-slate-400"><th class="text-left p-4">Keyword</th><th class="text-right p-4">Volume</th><th class="text-right p-4">CPC</th><th class="text-center p-4">Difficulty</th><th class="text-center p-4">Opportunity</th><th class="text-center p-4">Intent</th></tr></thead><tbody>'+d.slice(0,100).map(k=>'<tr class="table-row border-b border-slate-700/50"><td class="p-4 font-medium">'+esc(k.keyword)+'</td><td class="text-right p-4">'+fmt(k.searchVolume)+'</td><td class="text-right p-4 '+(k.cpc<3?'text-emerald-400':k.cpc<10?'text-amber-400':'text-rose-400')+' font-medium">$'+(k.cpc?.toFixed(2)||'0')+'</td><td class="text-center p-4"><span class="px-2 py-1 rounded text-xs '+(k.difficulty==='Easy'?'bg-emerald-500/20 text-emerald-400':k.difficulty==='Medium'?'bg-amber-500/20 text-amber-400':'bg-rose-500/20 text-rose-400')+'">'+k.difficulty+'</span></td><td class="text-center p-4"><div class="flex items-center justify-center gap-1"><div class="w-12 h-2 rounded bg-slate-700"><div class="h-full rounded '+(k.opportunityScore>=60?'bg-emerald-500':k.opportunityScore>=40?'bg-amber-500':'bg-rose-500')+'" style="width:'+k.opportunityScore+'%"></div></div><span class="text-xs '+(k.opportunityScore>=60?'text-emerald-400':'text-slate-400')+'">'+k.opportunityScore+'</span></div></td><td class="text-center p-4"><span class="px-2 py-1 rounded text-xs '+(k.intent==='Commercial'||k.intent==='Transactional'?'bg-purple-500/20 text-purple-400':'bg-slate-500/20 text-slate-400')+'">'+k.intent+'</span></td></tr>').join('')+'</tbody></table>';}

function filterKeywords(t){var f=[...keywordData];if(t==='opportunities')f=f.filter(k=>k.opportunityScore>=60).sort((a,b)=>b.opportunityScore-a.opportunityScore);else if(t==='lowcpc')f=f.filter(k=>k.cpc<5).sort((a,b)=>a.cpc-b.cpc);else if(t==='highvolume')f=f.sort((a,b)=>b.searchVolume-a.searchVolume);renderKeywordTable(f);}

async function sendChat(){var inp=document.getElementById('chatInput'),m=inp.value.trim();if(!m||isTyping)return;var ck=getApiKey('claude');if(!ck){showAlert('Add Claude API in Settings','error');showPage('settings');return;}addMsg('user',m);inp.value='';isTyping=true;document.getElementById('sendBtn').disabled=true;document.getElementById('aiStatus').textContent='Thinking...';document.getElementById('aiStatus').className='px-2 py-0.5 rounded-full text-xs bg-purple-500/20 text-purple-400 animate-pulse';var c=document.getElementById('chatMessages'),id='ai-'+Date.now();c.insertAdjacentHTML('beforeend','<div class="flex gap-3"><div class="w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><div class="bg-slate-700/50 rounded-xl rounded-tl-none p-4 max-w-2xl"><div id="'+id+'" class="ai-message text-sm"></div></div></div>');c.scrollTop=c.scrollHeight;
try{var r=await fetch('/ai/chat/stream',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:m,claudeApiKey:ck})});var rd=r.body.getReader(),dc=new TextDecoder(),txt='';while(true){var{value,done}=await rd.read();if(done)break;var ch=dc.decode(value);for(var ln of ch.split('\n')){if(ln.startsWith('data: ')){try{var d=JSON.parse(ln.slice(6));if(d.type==='chunk'){txt+=d.text;document.getElementById(id).innerHTML=marked.parse(txt)+'<span class="typing-cursor">‚ñä</span>';c.scrollTop=c.scrollHeight;}else if(d.type==='done')document.getElementById(id).innerHTML=marked.parse(txt);}catch(e){}}}}}catch(e){document.getElementById(id).innerHTML='<span class="text-rose-400">Error: '+e.message+'</span>';}isTyping=false;document.getElementById('sendBtn').disabled=false;document.getElementById('aiStatus').textContent='Ready';document.getElementById('aiStatus').className='px-2 py-0.5 rounded-full text-xs bg-emerald-500/20 text-emerald-400';}

function addMsg(r,t){var c=document.getElementById('chatMessages'),u=r==='user';c.insertAdjacentHTML('beforeend','<div class="flex gap-3 '+(u?'justify-end':'')+'"><div class="'+(u?'bg-blue-500/20 rounded-xl rounded-tr-none':'bg-slate-700/50 rounded-xl rounded-tl-none')+' p-4 max-w-2xl"><div class="text-sm">'+esc(t)+'</div></div></div>');c.scrollTop=c.scrollHeight;}
function quickPrompt(p){showPage('ai-assistant');setTimeout(()=>{document.getElementById('chatInput').value=p;sendChat();},100);}
function clearChat(){document.getElementById('chatMessages').innerHTML='<div class="flex gap-3"><div class="w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg></div><div class="bg-slate-700/50 rounded-xl rounded-tl-none p-4 max-w-2xl"><p class="text-sm">Chat cleared. How can I help?</p></div></div>';}

function loadDashboard(){fetch('/api/dashboard').then(r=>r.json()).then(d=>{document.getElementById('totalImpressions').textContent=fmt(d.impressions||0);document.getElementById('totalClicks').textContent=fmt(d.clicks||0);document.getElementById('totalConversions').textContent=fmt(d.conversions||0);document.getElementById('totalCost').textContent='$'+fmt(d.cost||0);initChart();}).catch(()=>initChart());}
function initChart(){var ctx=document.getElementById('performanceChart');if(ctx&&!ctx.chart){ctx.chart=new Chart(ctx,{type:'line',data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],datasets:[{label:'Clicks',data:[120,150,180,140,200,170,190],borderColor:'#3b82f6',backgroundColor:'rgba(59,130,246,0.1)',fill:true,tension:0.4}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{x:{grid:{color:'#1e293b'},ticks:{color:'#64748b'}},y:{grid:{color:'#1e293b'},ticks:{color:'#64748b'}}}}});}}

function fmt(n){if(n>=1e6)return(n/1e6).toFixed(1)+'M';if(n>=1e3)return(n/1e3).toFixed(1)+'K';return n?.toLocaleString()||'0';}
function esc(t){var d=document.createElement('div');d.textContent=t||'';return d.innerHTML;}
function showAlert(m,t){var c={success:'bg-emerald-500/20 border-emerald-500/50 text-emerald-400',error:'bg-rose-500/20 border-rose-500/50 text-rose-400',info:'bg-blue-500/20 border-blue-500/50 text-blue-400'};document.getElementById('alertContainer').innerHTML='<div class="p-4 rounded-xl border '+(c[t]||c.info)+' mb-4">'+m+'</div>';setTimeout(()=>document.getElementById('alertContainer').innerHTML='',5000);}
function refreshData(){loadDashboard();}
function exportKeywords(){var csv='Keyword,Volume,CPC,Competition,Opportunity,Intent\n'+competitorData.keywords.map(k=>'"'+k.keyword+'",'+k.searchVolume+','+k.cpc+','+k.competition+','+k.position+',"paid"').join('\n');var b=new Blob([csv],{type:'text/csv'});var a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='competitor_keywords.csv';a.click();showAlert('Downloaded!','success');}

document.addEventListener('DOMContentLoaded',checkAuth);
</script>
</body>
</html>
